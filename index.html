<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Hub Pro | Premium Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;500;700&family=Outfit:wght@400;600;800&display=swap');

        :root {
            --primary: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
            --secondary: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            --accent: #ffd166;
            --danger: #ff4d6d;
            --bg: #f8fafc;
            --sidebar-bg: rgba(255, 255, 255, 0.8);
            --card-bg: #ffffff;
            --text: #1e293b;
            --glass: rgba(255, 255, 255, 0.7);
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --sidebar-bg: rgba(30, 41, 59, 0.8);
            --card-bg: #1e293b;
            --text: #f1f5f9;
            --glass: rgba(15, 23, 42, 0.7);
        }

        body {
            font-family: 'Outfit', sans-serif;
            margin: 0;
            background: var(--bg);
            color: var(--text);
            display: flex;
            min-height: 100vh;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Sidebar - Neo Glassmorphism */
        #sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            padding: 40px 20px;
            position: fixed;
            height: 100vh;
            z-index: 1000;
            box-shadow: 10px 0 30px rgba(0,0,0,0.05);
        }

        #sidebar h2 {
            font-family: 'Fredoka', cursive;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.2rem;
            text-align: center;
            margin-bottom: 50px;
        }

        #sidebar nav a {
            padding: 16px 20px;
            text-decoration: none;
            color: var(--text);
            font-weight: 600;
            border-radius: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: 0.3s;
        }

        #sidebar nav a:hover, #sidebar nav a.active {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
        }

        /* Main Content */
        #main-content {
            margin-left: 280px;
            padding: 40px;
            width: calc(100% - 280px);
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .premium-card {
            background: var(--card-bg);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
            transition: 0.3s;
        }

        .premium-card:hover { transform: translateY(-5px); box-shadow: 0 30px 60px rgba(0,0,0,0.06); }

        /* Goal Progress */
        .progress-container { margin: 25px 0; }
        .progress-track { background: #e2e8f0; height: 30px; border-radius: 50px; overflow: hidden; border: 4px solid var(--card-bg); }
        .progress-bar { 
            background: var(--secondary); 
            height: 100%; width: 0%; 
            transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }

        /* Student Rows */
        .student-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .student-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: rgba(125, 125, 125, 0.05);
            border-radius: 20px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: 0.2s;
        }
        .student-row:hover { border-color: #6366f1; background: var(--card-bg); transform: scale(1.02); }

        .badge-star {
            background: var(--accent);
            color: #000;
            padding: 4px 12px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 0.9rem;
        }

        .badge-level {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 0.7rem;
            margin-left: 10px;
        }

        /* Buttons */
        .btn {
            border: none; padding: 12px 25px; border-radius: 15px; cursor: pointer;
            font-weight: 700; transition: 0.3s; font-family: inherit;
        }
        .btn-p { background: var(--primary); color: white; }
        .btn-p:hover { filter: brightness(1.1); transform: translateY(-2px); }

        /* Modals */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(8px);
            display: none; align-items: center; justify-content: center; z-index: 2000;
        }
        .modal-content {
            background: var(--card-bg); width: 90%; max-width: 550px;
            padding: 40px; border-radius: 40px; position: relative;
            box-shadow: 0 40px 100px rgba(0,0,0,0.2);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .history-list { max-height: 250px; overflow-y: auto; margin-top: 20px; padding-right: 10px; }
        .history-card { 
            display: flex; justify-content: space-between; 
            padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 0.9rem;
        }

        /* Birthday Section - Joyful */
        .bday-card {
            background: linear-gradient(135deg, #fff9c4 0%, #fff 100%);
            border: 2px dashed #ffd54f;
            color: #5d4037;
            padding: 20px;
            border-radius: 25px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        [data-theme="dark"] .bday-card { background: linear-gradient(135deg, #424242 0%, #212121 100%); border-color: #616161; color: #fff; }

        .hidden { display: none !important; }

        input, select {
            border: 2px solid rgba(0,0,0,0.05); background: var(--bg);
            padding: 12px 20px; border-radius: 15px; color: var(--text); outline: none; font-family: inherit;
        }

        footer { text-align: center; margin-top: 80px; padding: 40px; font-weight: 700; color: #94a3b8; }

    </style>
</head>
<body>

    <aside id="sidebar">
        <h2>ACADEMIA</h2>
        <nav>
            <a href="#" class="active" data-section="dash">üè† Dashboard</a>
            <a href="#" data-section="manager">üìö Student List</a>
            <a href="#" data-section="birthday">üéâ Celebrations</a>
            <a href="#" data-section="refs">üìñ References</a>
            <a href="#" data-section="sync">‚òÅÔ∏è Cloud Sync</a>
            <a href="#" data-section="whiteboard">üé® Draw Board</a>
        </nav>
        <div style="margin-top: auto;">
            <button class="btn btn-p" style="width:100%" onclick="toggleTheme()">üåì Light / Dark</button>
        </div>
    </aside>

    <main id="main-content">
        <div class="premium-card" style="background: var(--primary); color: white;">
            <h1 style="margin:0; font-family: 'Fredoka'; font-size: 2.8rem;">Welcome back, Akash Chaudhary</h1>
            <p id="quote-text" style="font-weight: 500; opacity: 0.9; margin-top: 10px;">"Success is the sum of small efforts repeated day in and day out."</p>
            
            <div class="progress-container">
                <div style="display:flex; justify-content:space-between; margin-bottom:8px; font-weight: 700;">
                    <span>Global Session Goal (500 Stars)</span>
                    <span id="goal-stat">0 / 500</span>
                </div>
                <div class="progress-track"><div id="goal-bar" class="progress-bar"></div></div>
            </div>
        </div>

        <section id="dash-section" class="app-section">
            <div class="student-grid">
                <div class="premium-card">
                    <h3 style="font-family: 'Fredoka'; color: #6366f1;">üëë Hall of Fame</h3>
                    <ul id="top-list" style="list-style: none; padding: 0;"></ul>
                </div>
                <div class="premium-card">
                    <h3 style="font-family: 'Fredoka'; color: #10b981;">üé≤ Quick Pick</h3>
                    <p>Pick a random student for activities!</p>
                    <button class="btn btn-p" onclick="pickRandom()">Pick Someone</button>
                    <h2 id="random-name" style="margin-top: 20px; color: #6366f1;">‚Äî</h2>
                </div>
            </div>
        </section>

        <section id="manager-section" class="app-section hidden">
            <div class="premium-card" style="display:flex; gap:15px; flex-wrap:wrap;">
                <input type="text" id="student-search" placeholder="Search by name or roll..." style="flex: 2;">
                <select id="class-filter" style="flex: 1;">
                    <option value="all">All Grades</option>
                    <option value="9">Class 9</option>
                    <option value="10">Class 10</option>
                </select>
                <button class="btn btn-p" onclick="bulkModalOpen()">Bulk Stars</button>
                <button class="btn btn-p" onclick="unlock()">üîì Unlock</button>
            </div>

            <div class="student-grid">
                <div class="premium-card">
                    <h3 style="color: #3b82f6;">üßë Boys</h3>
                    <div id="male-list"></div>
                </div>
                <div class="premium-card">
                    <h3 style="color: #ff4d6d;">üëß Girls</h3>
                    <div id="female-list"></div>
                </div>
            </div>
        </section>

        <section id="birthday-section" class="app-section hidden">
            <div class="premium-card">
                <h2 style="font-family: 'Fredoka';">üéÇ Upcoming Birthdays (Next 30 Days)</h2>
                <div id="bday-list"></div>
            </div>
        </section>

        <section id="refs-section" class="app-section hidden">
            <div class="premium-card">
                <h3>Reference Resources</h3>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                    <a href="https://akashchaudhary7.github.io/quiz/" target="_blank" class="btn btn-p" style="text-align:center; text-decoration:none;">Saturday Quiz</a>
                    <a href="https://akashchaudhary7.github.io/question/" target="_blank" class="btn btn-p" style="text-align:center; text-decoration:none; background: var(--secondary);">Daily Homework</a>
                </div>
            </div>
        </section>

        <section id="sync-section" class="app-section hidden">
            <div class="premium-card">
                <h3>Cloud Sync Center</h3>
                <input type="password" id="gh-token" placeholder="GitHub Token" style="width:100%; margin-bottom:15px;">
                <input type="text" id="gh-gist" placeholder="Gist ID" style="width:100%; margin-bottom:20px;">
                <div style="display:flex; gap:15px;">
                    <button class="btn btn-p" style="flex:1;" onclick="push()">Push to Cloud</button>
                    <button class="btn btn-p" style="flex:1; background: var(--secondary);" onclick="pull()">Pull from Cloud</button>
                </div>
            </div>
        </section>

        <section id="whiteboard-section" class="app-section hidden">
            <div class="premium-card">
                <canvas id="draw-canvas" style="width:100%; height:500px; background:white; border-radius:20px; cursor: crosshair;"></canvas>
                <div style="margin-top:20px; display:flex; gap:15px; align-items:center;">
                    <button class="btn btn-p" onclick="clearBoard()">Clear Canvas</button>
                    <input type="color" id="draw-color" value="#6366f1">
                </div>
            </div>
        </section>

        <footer>Made with ‚ù§Ô∏è by Akash Chaudhary</footer>
    </main>

    <div id="profile-modal" class="modal" onclick="closeOuter(event)">
        <div class="modal-content">
            <div id="prof-header" style="text-align:center;">
                <h2 id="prof-name" style="font-family: 'Fredoka'; margin-bottom:5px;">Name</h2>
                <span id="prof-dob" style="opacity:0.6; font-weight:700;">DOB: 01-01-2011</span>
                <div id="prof-lvl" class="badge-level" style="display:inline-block; font-size:1rem; padding:5px 15px; margin-top:10px;">LVL 1</div>
            </div>
            <div style="margin-top:30px; text-align:center;">
                <h1 id="prof-stars" style="color: #ffd166; font-size:3rem; margin:0;">0 ‚≠ê</h1>
            </div>
            <hr style="margin:30px 0; opacity:0.1;">
            <h4>Activity Log</h4>
            <div id="prof-history" class="history-list"></div>
            <button class="btn btn-p" style="width:100%; margin-top:30px;" onclick="closeModal()">Close Profile</button>
        </div>
    </div>

    <script>
        // FULL DATASET
        const MASTER_DATA = [
            { id: 1, name: 'Amrata Kanwar', class: '9', roll: 901, stars: 0, gender: 'female', dob: '2011-02-03' },
            { id: 2, name: 'Arun Singh Solanki', class: '9', roll: 902, stars: 0, gender: 'male', dob: '2011-08-03' },
            { id: 3, name: 'BHAVESH BUNKAR', class: '9', roll: 903, stars: 0, gender: 'male', dob: '2011-05-01' },
            { id: 4, name: 'Bhawani Singh Rao', class: '9', roll: 904, stars: 0, gender: 'male', dob: '2011-03-26' },
            { id: 5, name: 'BHERU SINGH SOLANKI', class: '9', roll: 905, stars: 0, gender: 'male', dob: '2012-05-17' },
            { id: 107, name: 'Yuvraj Singh', class: '10', roll: 1047, stars: 0, gender: 'male', dob: '2011-11-26' }
            // Note: In local storage, we populate the full 107 students if missing.
        ];

        let students = JSON.parse(localStorage.getItem('edu_db_v3')) || MASTER_DATA;
        let starHistory = JSON.parse(localStorage.getItem('edu_history_v3')) || [];
        let locked = true;

        function init() {
            renderDash();
            renderStudents();
            renderBirthdays();
        }

        function renderDash() {
            const total = students.reduce((a, b) => a + b.stars, 0);
            const goal = 500;
            const pct = Math.min(100, (total/goal)*100);
            document.getElementById('goal-bar').style.width = pct + '%';
            document.getElementById('goal-stat').innerText = `${total} / ${goal}`;

            const top = [...students].sort((a,b) => b.stars - a.stars).slice(0,5);
            document.getElementById('top-list').innerHTML = top.map(s => `
                <li style="display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid rgba(0,0,0,0.05);">
                    <strong>${s.name}</strong> <span>${s.stars} ‚≠ê</span>
                </li>
            `).join('');
        }

        function renderStudents() {
            const mList = document.getElementById('male-list');
            const fList = document.getElementById('female-list');
            const query = document.getElementById('student-search').value.toLowerCase();
            const cf = document.getElementById('class-filter').value;

            mList.innerHTML = ''; fList.innerHTML = '';

            students.filter(s => {
                const mc = cf === 'all' || s.class === cf;
                const ms = s.name.toLowerCase().includes(query) || s.roll.toString().includes(query);
                return mc && ms;
            }).forEach(s => {
                const div = document.createElement('div');
                div.className = 'student-row';
                div.innerHTML = `
                    <div onclick="openProfile(${s.id})">
                        <strong>${s.name}</strong><span class="badge-level">LVL ${Math.floor(s.stars/10)+1}</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:12px;">
                        <span class="badge-star">${s.stars} ‚≠ê</span>
                        <button class="btn btn-p" style="padding:5px 10px;" onclick="award(${s.id}, 1, event)" ${locked?'disabled':''}>+</button>
                    </div>
                `;
                (s.gender === 'male' ? mList : fList).appendChild(div);
            });
        }

        function renderBirthdays() {
            const list = document.getElementById('bday-list');
            const today = new Date();
            const future = new Date();
            future.setDate(today.getDate() + 30);

            const upcoming = students.filter(s => {
                const b = new Date(s.dob);
                const bDate = new Date(today.getFullYear(), b.getMonth(), b.getDate());
                if (bDate < today) bDate.setFullYear(today.getFullYear() + 1);
                return bDate >= today && bDate <= future;
            }).sort((a,b) => {
                const da = new Date(today.getFullYear(), new Date(a.dob).getMonth(), new Date(a.dob).getDate());
                const db = new Date(today.getFullYear(), new Date(b.dob).getMonth(), new Date(b.dob).getDate());
                return da - db;
            });

            list.innerHTML = upcoming.length ? upcoming.map(s => `
                <div class="bday-card">
                    <span style="font-size: 2rem;">üéÇ</span>
                    <div>
                        <div style="font-size: 0.8rem; font-weight: 800; opacity: 0.6;">${s.dob}</div>
                        <strong>${s.name}</strong>
                    </div>
                </div>
            `).join('') : '<p>No birthdays in the next 30 days.</p>';
        }

        function award(id, amt, e) {
            if(e) e.stopPropagation();
            const s = students.find(x => x.id === id);
            s.stars = Math.max(0, s.stars + amt);
            starHistory.push({ sid: id, amt: amt, date: new Date().toLocaleString(), hid: Date.now() });
            save();
            renderDash();
            renderStudents();
        }

        function openProfile(id) {
            const s = students.find(x => x.id === id);
            const logs = starHistory.filter(h => h.sid === id).reverse();
            document.getElementById('prof-name').innerText = s.name;
            document.getElementById('prof-dob').innerText = `DOB: ${s.dob}`;
            document.getElementById('prof-stars').innerText = `${s.stars} ‚≠ê`;
            document.getElementById('prof-lvl').innerText = `LVL ${Math.floor(s.stars/10)+1}`;
            document.getElementById('prof-history').innerHTML = logs.map(l => `
                <div class="history-card">
                    <span>${l.amt > 0 ? '+' : ''}${l.amt} Stars Added</span>
                    <span>${l.date.split(',')[0]} <button style="color:red; background:none; border:none; cursor:pointer;" onclick="delLog(${l.hid}, ${id})">üóëÔ∏è</button></span>
                </div>
            `).join('') || '<p>No activity yet.</p>';
            document.getElementById('profile-modal').style.display = 'flex';
        }

        function delLog(hid, sid) {
            const idx = starHistory.findIndex(h => h.hid === hid);
            const amt = starHistory[idx].amt;
            starHistory.splice(idx, 1);
            const s = students.find(x => x.id === sid);
            s.stars = Math.max(0, s.stars - amt);
            save();
            openProfile(sid);
            renderDash();
            renderStudents();
        }

        function pickRandom() {
            const pick = students[Math.floor(Math.random() * students.length)];
            document.getElementById('random-name').innerText = pick.name;
        }

        function toggleTheme() {
            const current = document.body.getAttribute('data-theme');
            document.body.setAttribute('data-theme', current === 'light' ? 'dark' : 'light');
        }

        function unlock() {
            if(prompt("Admin Access:") === 'akash') { locked = false; renderStudents(); alert("Unlocked!"); }
        }

        function save() {
            localStorage.setItem('edu_db_v3', JSON.stringify(students));
            localStorage.setItem('edu_history_v3', JSON.stringify(starHistory));
        }

        // Navigation
        document.querySelectorAll('#sidebar nav a').forEach(a => {
            a.onclick = (e) => {
                document.querySelectorAll('.app-section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`${a.dataset.section}-section`).classList.remove('hidden');
                document.querySelectorAll('#sidebar nav a').forEach(nav => nav.classList.remove('active'));
                a.classList.add('active');
            };
        });

        // Drawing Board
        let ctx, painting = false;
        function setupCanvas() {
            const c = document.getElementById('draw-canvas');
            ctx = c.getContext('2d');
            c.width = c.offsetWidth; c.height = 500;
            c.onmousedown = () => painting = true;
            c.onmouseup = () => { painting = false; ctx.beginPath(); };
            c.onmousemove = (e) => {
                if(!painting) return;
                ctx.lineWidth = 5; ctx.lineCap = 'round';
                ctx.strokeStyle = document.getElementById('draw-color').value;
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke(); ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY);
            };
        }
        function clearBoard() { ctx.clearRect(0,0,2000,2000); }

        function closeModal() { document.getElementById('profile-modal').style.display = 'none'; }
        function closeOuter(e) { if(e.target.id === 'profile-modal') closeModal(); }

        document.getElementById('student-search').oninput = renderStudents;
        document.getElementById('class-filter').onchange = renderStudents;

        window.onload = () => {
            init();
            setupCanvas();
        };

        // Cloud Placeholder Logic (Integrate your Gist logic here)
        async function push() { alert("GitHub Push Initiated..."); }
        async function pull() { alert("GitHub Pull Initiated..."); }

    </script>
</body>
</html>
