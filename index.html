<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Hub - Fun Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;600;700&display=swap');

        :root {
            --primary: #4cc9f0; /* Sky Blue */
            --secondary: #06d6a0; /* Mint */
            --accent: #ffd166; /* Sunny Yellow */
            --danger: #ef476f; /* Soft Red */
            --bg: #f8fdff;
            --text: #073b4c;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            background-color: var(--bg);
            display: flex;
            min-height: 100vh;
            color: var(--text);
        }

        /* Sidebar - Fun & Rounded */
        #sidebar {
            width: 260px;
            background: white;
            border-right: 3px solid #eef2f5;
            display: flex;
            flex-direction: column;
            padding: 30px 15px;
            box-shadow: 10px 0 30px rgba(0,0,0,0.03);
            position: fixed;
            height: 100%;
        }

        #sidebar h2 {
            font-family: 'Fredoka One', cursive;
            color: var(--primary);
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 40px;
        }

        #sidebar nav a {
            padding: 15px 20px;
            text-decoration: none;
            color: var(--text);
            font-weight: 700;
            border-radius: 15px;
            margin-bottom: 10px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        #sidebar nav a:hover, #sidebar nav a.active {
            background-color: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        /* Main Content */
        #main-content {
            margin-left: 260px;
            padding: 40px;
            width: calc(100% - 260px);
        }

        .header-section { margin-bottom: 40px; }
        .header-section h1 { font-family: 'Fredoka One', cursive; font-size: 2.5rem; color: var(--primary); margin: 0; }
        
        #quote-box {
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            border-left: 8px solid var(--accent);
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            margin-top: 20px;
            font-style: italic;
        }

        /* Leaderboard Grid */
        .leaderboard-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .leader-card {
            background: white;
            padding: 25px;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.04);
            border: 2px solid #f0f4f8;
        }

        .leader-card h3 { 
            font-family: 'Fredoka One', cursive; 
            font-size: 1.2rem; 
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Student Manager */
        .manager-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.02);
        }

        input, select {
            border: 2px solid #eef2f5;
            padding: 12px 18px;
            border-radius: 15px;
            font-family: inherit;
            outline: none;
            font-weight: 600;
        }

        .student-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .gender-box { background: white; padding: 25px; border-radius: 30px; }

        .student-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8fdff;
            border-radius: 15px;
            margin-bottom: 12px;
            border: 1px solid #eef2f5;
        }

        .star-btn {
            background: var(--accent);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .star-btn:disabled { background: #eee; cursor: not-allowed; }

        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px;
            font-weight: 700;
            color: #b1becd;
        }

        .sync-btn { background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; }

        .hidden { display: none !important; }

        @media (max-width: 900px) {
            #sidebar { display: none; }
            #main-content { margin-left: 0; width: 100%; }
            .student-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <aside id="sidebar">
        <h2>ACADEMIA HUB</h2>
        <nav>
            <a href="#" class="active" data-section="dash">üè† Dashboard</a>
            <a href="#" data-section="manager">üìö Student Manager</a>
            <a href="#" data-section="sync">‚òÅÔ∏è Cloud Sync</a>
            <a href="#" data-section="whiteboard">üé® Whiteboard</a>
        </nav>
    </aside>

    <main id="main-content">
        <div class="header-section">
            <h1>Welcome, Akash Chaudhary</h1>
            <div id="quote-box">Loading a spark of wisdom...</div>
        </div>

        <section id="dash-section" class="app-section">
            <div class="leaderboard-container">
                <div class="leader-card" style="border-top: 8px solid var(--primary);">
                    <h3 style="color: var(--primary);">‚≠ê Week's Best</h3>
                    <ul id="list-week" style="list-style: none; padding: 0;"></ul>
                </div>
                <div class="leader-card" style="border-top: 8px solid var(--secondary);">
                    <h3 style="color: var(--secondary);">üèÜ Month's Best</h3>
                    <ul id="list-month" style="list-style: none; padding: 0;"></ul>
                </div>
                <div class="leader-card" style="border-top: 8px solid var(--accent);">
                    <h3 style="color: var(--accent);">üëë Overall Legends</h3>
                    <ul id="list-overall" style="list-style: none; padding: 0;"></ul>
                </div>
            </div>
        </section>

        <section id="manager-section" class="app-section hidden">
            <div class="manager-controls">
                <input type="text" id="search-in" placeholder="Find a student...">
                <select id="class-in">
                    <option value="all">All Classes</option>
                    <option value="9">Class 9</option>
                    <option value="10">Class 10</option>
                </select>
                <button class="sync-btn" onclick="askUnlock()">üîì Unlock Stars</button>
            </div>

            <div class="student-grid">
                <div class="gender-box">
                    <h3 style="color: var(--primary);">üßë Boys</h3>
                    <div id="m-list"></div>
                </div>
                <div class="gender-box">
                    <h3 style="color: var(--danger);">üëß Girls</h3>
                    <div id="f-list"></div>
                </div>
            </div>
        </section>

        <section id="sync-section" class="app-section hidden">
            <div class="leader-card">
                <h3>GitHub Data Sync</h3>
                <p>Link your account to save stars forever.</p>
                <input type="password" id="gh-token" placeholder="GitHub Token" style="width: 100%; margin-bottom: 15px;">
                <input type="text" id="gh-gist" placeholder="Gist ID" style="width: 100%; margin-bottom: 15px;">
                <button class="sync-btn" onclick="saveSyncSettings()">Link & Save</button>
                <hr>
                <button class="sync-btn" onclick="pushData()">üì§ Push Stars to Cloud</button>
                <button class="sync-btn" onclick="pullData()" style="background: var(--accent); color: var(--text);">üì• Pull Stars to Device</button>
            </div>
        </section>

        <section id="whiteboard-section" class="app-section hidden">
            <div class="leader-card">
                <canvas id="canvas" style="border: 2px solid #eee; border-radius: 20px; width: 100%; height: 500px; background: white;"></canvas>
                <div style="margin-top: 15px; display: flex; gap: 10px;">
                    <button class="sync-btn" onclick="clearDraw()">üóëÔ∏è Clear</button>
                    <input type="color" id="draw-color" value="#4cc9f0">
                </div>
            </div>
        </section>

        <footer>
            Made with <span style="color: var(--danger);">‚ù§Ô∏è</span> by Akash Chaudhary
        </footer>
    </main>

    <script>
        // --- DATA & SETUP ---
        let students = JSON.parse(localStorage.getItem('edu_students')) || [
            { id: 1, name: 'Amrata Kanwar', class: '9', roll: 901, stars: 0, gender: 'female' },
            { id: 2, name: 'Arun Singh', class: '9', roll: 902, stars: 0, gender: 'male' },
            { id: 3, name: 'Bhavesh Bunkar', class: '9', roll: 903, stars: 0, gender: 'male' }
        ];

        let isLocked = true;
        let syncInfo = JSON.parse(localStorage.getItem('edu_sync')) || { token: '', gist: '' };

        const quotes = [
            "Believe in yourself and you're halfway there!",
            "Every student can learn, just not on the same day or in the same way.",
            "Mistakes are proof that you are trying.",
            "The expert in anything was once a beginner."
        ];

        // --- RENDERERS ---
        function init() {
            renderHeader();
            renderLeaders();
            renderStudents();
        }

        function renderHeader() {
            document.getElementById('quote-box').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        }

        function renderLeaders() {
            const sorted = [...students].sort((a,b) => b.stars - a.stars);
            
            // Simulating time-based leads using random modifiers for visual variety in this version
            document.getElementById('list-overall').innerHTML = sorted.slice(0, 5).map(s => `<li>üëë ${s.name} (${s.stars} ‚≠ê)</li>`).join('');
            document.getElementById('list-month').innerHTML = sorted.slice(0, 3).map(s => `<li>üèÜ ${s.name}</li>`).join('');
            document.getElementById('list-week').innerHTML = sorted.slice(0, 3).map(s => `<li>‚≠ê ${s.name}</li>`).join('');
        }

        function renderStudents() {
            const mList = document.getElementById('m-list');
            const fList = document.getElementById('f-list');
            const search = document.getElementById('search-in').value.toLowerCase();
            const classFilter = document.getElementById('class-in').value;

            mList.innerHTML = ''; fList.innerHTML = '';

            students.filter(s => {
                const matchClass = classFilter === 'all' || s.class === classFilter;
                const matchSearch = s.name.toLowerCase().includes(search);
                return matchClass && matchSearch;
            }).forEach(s => {
                const div = document.createElement('div');
                div.className = 'student-item';
                div.innerHTML = `
                    <span><strong>${s.name}</strong></span>
                    <div style="display:flex; align-items:center; gap:12px">
                        <button class="star-btn" onclick="updateStars(${s.id}, -1)" ${isLocked ? 'disabled' : ''}>-</button>
                        <span style="font-weight:bold; min-width: 25px; text-align:center">${s.stars}</span>
                        <button class="star-btn" onclick="updateStars(${s.id}, 1)" ${isLocked ? 'disabled' : ''}>+</button>
                    </div>
                `;
                if(s.gender === 'male') mList.appendChild(div);
                else fList.appendChild(div);
            });
        }

        // --- ACTIONS ---
        function updateStars(id, val) {
            const s = students.find(x => x.id === id);
            s.stars = Math.max(0, s.stars + val);
            localStorage.setItem('edu_students', JSON.stringify(students));
            renderStudents();
            renderLeaders();
        }

        function askUnlock() {
            const pass = prompt("Enter teacher password:");
            if(pass === 'akash') {
                isLocked = false;
                renderStudents();
                alert("Stars unlocked! You can now reward students.");
            }
        }

        // --- NAVIGATION ---
        document.querySelectorAll('#sidebar nav a').forEach(link => {
            link.onclick = (e) => {
                const section = e.target.dataset.section;
                document.querySelectorAll('.app-section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`${section}-section`).classList.remove('hidden');
                document.querySelectorAll('#sidebar nav a').forEach(a => a.classList.remove('active'));
                link.classList.add('active');
                if(section === 'whiteboard') initCanvas();
            }
        });

        // --- CLOUD SYNC ---
        async function pushData() {
            if(!syncInfo.token || !syncInfo.gist) return alert("Setup Cloud Sync first!");
            try {
                await fetch(`https://api.github.com/gists/${syncInfo.gist}`, {
                    method: 'PATCH',
                    headers: { 'Authorization': `token ${syncInfo.token}` },
                    body: JSON.stringify({ files: { "edu_stars.json": { content: JSON.stringify(students) } } })
                });
                alert("Stars synced to Cloud! üöÄ");
            } catch (e) { alert("Sync failed!"); }
        }

        async function pullData() {
            if(!syncInfo.token || !syncInfo.gist) return alert("Setup Cloud Sync first!");
            try {
                const res = await fetch(`https://api.github.com/gists/${syncInfo.gist}`, {
                    headers: { 'Authorization': `token ${syncInfo.token}` }
                });
                const data = await res.json();
                students = JSON.parse(data.files["edu_stars.json"].content);
                localStorage.setItem('edu_students', JSON.stringify(students));
                init();
                alert("Stars updated from Cloud! üì•");
            } catch (e) { alert("Pull failed!"); }
        }

        function saveSyncSettings() {
            syncInfo.token = document.getElementById('gh-token').value;
            syncInfo.gist = document.getElementById('gh-gist').value;
            localStorage.setItem('edu_sync', JSON.stringify(syncInfo));
            alert("Settings saved!");
        }

        // --- CANVAS ---
        let ctx, painting = false;
        function initCanvas() {
            const c = document.getElementById('canvas');
            ctx = c.getContext('2d');
            c.width = c.offsetWidth;
            c.height = 500;
            c.onmousedown = () => painting = true;
            c.onmouseup = () => { painting = false; ctx.beginPath(); };
            c.onmousemove = (e) => {
                if(!painting) return;
                ctx.lineWidth = 4; ctx.lineCap = 'round';
                ctx.strokeStyle = document.getElementById('draw-color').value;
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke(); ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY);
            };
        }
        function clearDraw() { ctx.clearRect(0,0,2000,2000); }

        document.getElementById('search-in').oninput = renderStudents;
        document.getElementById('class-in').onchange = renderStudents;

        init();
    </script>
</body>
</html>
