<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Hub - Ultra Modern Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Quicksand:wght@500;700&display=swap');

        :root {
            --primary: #4cc9f0;
            --secondary: #06d6a0;
            --accent: #ffd166;
            --danger: #ff4d6d;
            --bg: #f0f9ff;
            --card-bg: #ffffff;
            --text: #073b4c;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            background: var(--bg);
            display: flex;
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
        }

        /* Sidebar Styling */
        #sidebar {
            width: 280px;
            background: white;
            border-right: 4px solid #e0f2fe;
            display: flex;
            flex-direction: column;
            padding: 40px 20px;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        #sidebar h2 {
            font-family: 'Fredoka', cursive;
            color: var(--primary);
            font-size: 2rem;
            text-align: center;
            margin-bottom: 50px;
            letter-spacing: 1px;
        }

        #sidebar nav a {
            padding: 16px 24px;
            text-decoration: none;
            color: var(--text);
            font-weight: 700;
            border-radius: 20px;
            margin-bottom: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #sidebar nav a:hover, #sidebar nav a.active {
            background: var(--primary);
            color: white;
            transform: translateX(10px);
            box-shadow: 0 10px 20px rgba(76, 201, 240, 0.3);
        }

        /* Content Area */
        #main-content {
            margin-left: 320px;
            padding: 50px;
            width: calc(100% - 320px);
        }

        .welcome-header { margin-bottom: 40px; animation: fadeInDown 0.8s ease; }
        .welcome-header h1 { font-family: 'Fredoka', cursive; font-size: 3rem; color: var(--primary); margin: 0; }
        
        #quote-box {
            background: white;
            padding: 25px;
            border-radius: 25px;
            border-left: 10px solid var(--accent);
            box-shadow: 0 15px 30px rgba(0,0,0,0.05);
            margin-top: 25px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Leaderboard Widgets */
        .leaderboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .leader-card {
            background: white;
            padding: 30px;
            border-radius: 35px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.04);
            border-bottom: 6px solid transparent;
            transition: transform 0.3s;
        }
        .leader-card:hover { transform: translateY(-10px); }

        .leader-card h3 { font-family: 'Fredoka', cursive; font-size: 1.4rem; margin-top: 0; }

        /* Student Manager UI */
        .manager-header {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            background: white;
            padding: 25px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.03);
        }

        input, select {
            border: 2px solid #f1f5f9;
            padding: 14px 20px;
            border-radius: 18px;
            font-family: inherit;
            font-weight: 600;
            outline: none;
            transition: border-color 0.3s;
        }
        input:focus { border-color: var(--primary); }

        .student-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .gender-container { background: white; padding: 30px; border-radius: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.02); }

        .student-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 25px;
            background: #f8fafc;
            border-radius: 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .student-row:hover { border-color: var(--primary); background: white; transform: scale(1.02); }

        .star-badge {
            background: var(--accent);
            color: var(--text);
            padding: 5px 12px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 0.9rem;
            margin-left: 10px;
            box-shadow: 0 4px 10px rgba(255, 209, 102, 0.4);
        }

        .btn-round {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-weight: 900;
            font-size: 1.2rem;
            transition: 0.2s;
        }
        .btn-plus { background: var(--secondary); color: white; }
        .btn-minus { background: var(--danger); color: white; }
        .btn-round:disabled { background: #cbd5e1; cursor: not-allowed; }

        /* Reference Grid */
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .resource-link {
            padding: 20px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            text-align: center;
            font-weight: 700;
            transition: 0.3s;
        }
        .resource-link:hover { opacity: 0.9; transform: scale(1.05); }

        footer { text-align: center; margin-top: 80px; padding: 40px; font-weight: 700; color: #94a3b8; }

        .hidden { display: none !important; }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <aside id="sidebar">
        <h2>ACADEMIA</h2>
        <nav>
            <a href="#" class="active" data-section="dash">üè† Dashboard</a>
            <a href="#" data-section="manager">üìö Student List</a>
            <a href="#" data-section="refs">üìñ References</a>
            <a href="#" data-section="sync">‚òÅÔ∏è Cloud Sync</a>
            <a href="#" data-section="whiteboard">üé® Drawing Board</a>
        </nav>
    </aside>

    <main id="main-content">
        <div class="welcome-header">
            <h1>Welcome, Akash Chaudhary</h1>
            <div id="quote-box">Focus on the journey, not just the destination...</div>
        </div>

        <section id="dash-section" class="app-section">
            <div class="leaderboard-grid">
                <div class="leader-card" style="border-bottom-color: var(--primary);">
                    <h3 style="color: var(--primary);">üåü Week's Top Star</h3>
                    <ul id="top-week" style="list-style: none; padding: 0; font-weight: 600;"></ul>
                </div>
                <div class="leader-card" style="border-bottom-color: var(--secondary);">
                    <h3 style="color: var(--secondary);">üèÜ Monthly Champion</h3>
                    <ul id="top-month" style="list-style: none; padding: 0; font-weight: 600;"></ul>
                </div>
                <div class="leader-card" style="border-bottom-color: var(--accent);">
                    <h3 style="color: var(--accent);">üëë Session Legends</h3>
                    <ul id="top-overall" style="list-style: none; padding: 0; font-weight: 600;"></ul>
                </div>
            </div>
        </section>

        <section id="manager-section" class="app-section hidden">
            <div class="manager-header">
                <input type="text" id="student-search" placeholder="Type name or roll no..." style="flex: 2;">
                <select id="class-filter" style="flex: 1;">
                    <option value="all">All Grades</option>
                    <option value="9">Class 9</option>
                    <option value="10">Class 10</option>
                </select>
                <button class="resource-link" style="border:none; cursor:pointer;" onclick="verifyAdmin()">üîì Unlock Edit</button>
            </div>

            <div class="student-columns">
                <div class="gender-container">
                    <h3 style="color: var(--primary); font-family: 'Fredoka';">üßë Boys</h3>
                    <div id="male-list"></div>
                </div>
                <div class="gender-container">
                    <h3 style="color: var(--danger); font-family: 'Fredoka';">üëß Girls</h3>
                    <div id="female-list"></div>
                </div>
            </div>
        </section>

        <section id="refs-section" class="app-section hidden">
            <div class="leader-card">
                <h3>Study Resources üìñ</h3>
                <p>Quick access to your learning materials and daily tasks.</p>
                <div class="resource-grid">
                    <a href="https://akashchaudhary7.github.io/quiz/" target="_blank" class="resource-link" style="background: var(--secondary);">Saturday Quiz</a>
                    <a href="https://akashchaudhary7.github.io/question/" target="_blank" class="resource-link">Daily Homework</a>
                </div>
            </div>
        </section>

        <section id="sync-section" class="app-section hidden">
            <div class="leader-card">
                <h3>Cloud Sync Settings</h3>
                <input type="password" id="gh-token" placeholder="GitHub PAT Token" style="width: 100%; margin-bottom: 15px;">
                <input type="text" id="gh-gist" placeholder="Gist ID" style="width: 100%; margin-bottom: 20px;">
                <div style="display:flex; gap:15px;">
                    <button class="resource-link" style="border:none; flex:1;" onclick="pushCloud()">Upload to Cloud</button>
                    <button class="resource-link" style="border:none; flex:1; background: var(--accent); color: var(--text);" onclick="pullCloud()">Download to Device</button>
                </div>
            </div>
        </section>

        <section id="whiteboard-section" class="app-section hidden">
            <div class="leader-card">
                <canvas id="canvas" style="width:100%; height:450px; background:white; border-radius:25px; border:2px dashed #cbd5e1;"></canvas>
                <div style="margin-top:20px; display:flex; gap:15px; align-items:center;">
                    <button class="resource-link" style="border:none;" onclick="clearCanvas()">Clear Canvas</button>
                    <input type="color" id="brush-color" value="#4cc9f0">
                </div>
            </div>
        </section>

        <footer>
            Made with <span style="color: var(--danger);">‚ù§Ô∏è</span> by Akash Chaudhary
        </footer>
    </main>

    <script>
        // --- MASTER STUDENT LIST (FULL 107 STUDENTS) ---
        const ALL_STUDENTS = [
            // Class 9
            { id: 1, name: 'Amrata Kanwar', class: '9', roll: 901, stars: 0, gender: 'female' },
            { id: 2, name: 'Arun Singh Solanki', class: '9', roll: 902, stars: 0, gender: 'male' },
            { id: 3, name: 'Bhavesh Bunkar', class: '9', roll: 903, stars: 0, gender: 'male' },
            { id: 4, name: 'Bhawani Singh Rao', class: '9', roll: 904, stars: 0, gender: 'male' },
            { id: 5, name: 'Bheru Singh Solanki', class: '9', roll: 905, stars: 0, gender: 'male' },
            { id: 6, name: 'Chanchal Kunwar Chouhan', class: '9', roll: 906, stars: 0, gender: 'female' },
            { id: 7, name: 'Chandra Pal Singh', class: '9', roll: 907, stars: 0, gender: 'male' },
            { id: 8, name: 'Dalpat Singh Rathore', class: '9', roll: 908, stars: 0, gender: 'male' },
            { id: 9, name: 'Deepak Gurjar', class: '9', roll: 909, stars: 0, gender: 'male' },
            { id: 10, name: 'Dimpal Rawat', class: '9', roll: 910, stars: 0, gender: 'female' },
            { id: 11, name: 'Dimple Kunwar Chouhan', class: '9', roll: 911, stars: 0, gender: 'female' },
            { id: 12, name: 'Durga Oad', class: '9', roll: 912, stars: 0, gender: 'female' },
            { id: 13, name: 'Ganga Bhil', class: '9', roll: 913, stars: 0, gender: 'female' },
            { id: 14, name: 'Ganpat Singh Rathore', class: '9', roll: 914, stars: 0, gender: 'male' },
            { id: 15, name: 'Gaytri Gurjar', class: '9', roll: 915, stars: 0, gender: 'female' },
            { id: 16, name: 'Gopal Damami', class: '9', roll: 916, stars: 0, gender: 'male' },
            { id: 17, name: 'Hetal Kanwar Ravana', class: '9', roll: 917, stars: 0, gender: 'female' },
            { id: 18, name: 'Hitesh Sain', class: '9', roll: 918, stars: 0, gender: 'male' },
            { id: 19, name: 'Jamana Rawat', class: '9', roll: 919, stars: 0, gender: 'female' },
            { id: 20, name: 'Kalpana Salvi', class: '9', roll: 920, stars: 0, gender: 'female' },
            { id: 21, name: 'Karan Singh Chouhan', class: '9', roll: 921, stars: 0, gender: 'male' },
            { id: 22, name: 'Khushi Kanwar Ravana', class: '9', roll: 922, stars: 0, gender: 'female' },
            { id: 23, name: 'Khushi Salvi', class: '9', roll: 923, stars: 0, gender: 'female' },
            { id: 24, name: 'Kundan Salvi', class: '9', roll: 924, stars: 0, gender: 'male' },
            { id: 25, name: 'Kushveer Singh', class: '9', roll: 925, stars: 0, gender: 'male' },
            { id: 26, name: 'Kusum Gurjar', class: '9', roll: 926, stars: 0, gender: 'female' },
            { id: 27, name: 'Lalita Gurjar', class: '9', roll: 927, stars: 0, gender: 'female' },
            { id: 28, name: 'Laxmi Gurjar', class: '9', roll: 928, stars: 0, gender: 'female' },
            { id: 29, name: 'Lokesh Singh Rathore', class: '9', roll: 929, stars: 0, gender: 'male' },
            { id: 30, name: 'Madan Gurjar', class: '9', roll: 930, stars: 0, gender: 'male' },
            { id: 31, name: 'Mahaveer Prajapat', class: '9', roll: 931, stars: 0, gender: 'male' },
            { id: 32, name: 'Mahaveer Singh Ravana', class: '9', roll: 932, stars: 0, gender: 'male' },
            { id: 33, name: 'Mamta Balai', class: '9', roll: 933, stars: 0, gender: 'female' },
            { id: 34, name: 'Mamta Rawat', class: '9', roll: 934, stars: 0, gender: 'female' },
            { id: 35, name: 'Manish Das Vaishnav', class: '9', roll: 935, stars: 0, gender: 'male' },
            { id: 36, name: 'Manisha Kanwar Chundawat', class: '9', roll: 936, stars: 0, gender: 'female' },
            { id: 37, name: 'Manisha Oad', class: '9', roll: 937, stars: 0, gender: 'female' },
            { id: 38, name: 'Mohit Kumar Salvi', class: '9', roll: 938, stars: 0, gender: 'male' },
            { id: 39, name: 'Mona Gurjar', class: '9', roll: 939, stars: 0, gender: 'female' },
            { id: 40, name: 'Navya Kanwar Ravana', class: '9', roll: 940, stars: 0, gender: 'female' },
            { id: 41, name: 'Nidhi Prajapat', class: '9', roll: 941, stars: 0, gender: 'female' },
            { id: 42, name: 'Nikhil Singh Rao', class: '9', roll: 942, stars: 0, gender: 'male' },
            { id: 43, name: 'Nilesh Gurjar', class: '9', roll: 943, stars: 0, gender: 'male' },
            { id: 44, name: 'Pawan Gurjar', class: '9', roll: 944, stars: 0, gender: 'male' },
            { id: 45, name: 'Pintu Singh Rathore', class: '9', roll: 945, stars: 0, gender: 'male' },
            { id: 46, name: 'Prahlad Singh Chouhan', class: '9', roll: 946, stars: 0, gender: 'male' },
            { id: 47, name: 'Radhika Gurjar', class: '9', roll: 947, stars: 0, gender: 'female' },
            { id: 48, name: 'Rajendra Singh Sedot', class: '9', roll: 948, stars: 0, gender: 'male' },
            { id: 49, name: 'Ram Lal Rebari', class: '9', roll: 949, stars: 0, gender: 'male' },
            { id: 50, name: 'Ravina Kunwar Chouhan', class: '9', roll: 950, stars: 0, gender: 'female' },
            { id: 51, name: 'Sanjay Kumar Bunkar', class: '9', roll: 951, stars: 0, gender: 'male' },
            { id: 52, name: 'Sheetal Kunwar', class: '9', roll: 952, stars: 0, gender: 'female' },
            { id: 53, name: 'Shiv Lal Gurjar', class: '9', roll: 953, stars: 0, gender: 'male' },
            { id: 54, name: 'Shivraj Singh Bhati', class: '9', roll: 954, stars: 0, gender: 'male' },
            { id: 55, name: 'Shubham Dholi', class: '9', roll: 955, stars: 0, gender: 'male' },
            { id: 56, name: 'Shubham Singh', class: '9', roll: 956, stars: 0, gender: 'male' },
            { id: 57, name: 'Shyamu Gurjar', class: '9', roll: 957, stars: 0, gender: 'female' },
            { id: 58, name: 'Suresh Chandra Gurjar', class: '9', roll: 958, stars: 0, gender: 'male' },
            { id: 59, name: 'Vishnu Balai', class: '9', roll: 959, stars: 0, gender: 'male' },
            { id: 60, name: 'Yasraj Singh Solanki', class: '9', roll: 960, stars: 0, gender: 'male' },
            // Class 10
            { id: 61, name: 'Ajay Singh Kitawat', class: '10', roll: 1001, stars: 0, gender: 'male' },
            { id: 62, name: 'Anisha Suthar', class: '10', roll: 1002, stars: 0, gender: 'female' },
            { id: 63, name: 'Anita Gurjar', class: '10', roll: 1003, stars: 0, gender: 'female' },
            { id: 64, name: 'Apeksha Rao', class: '10', roll: 1004, stars: 0, gender: 'female' },
            { id: 65, name: 'Bhawana Dholi', class: '10', roll: 1005, stars: 0, gender: 'female' },
            { id: 66, name: 'Bhawana Kanwar Rawat', class: '10', roll: 1006, stars: 0, gender: 'female' },
            { id: 67, name: 'Chandra Veer Singh Solanki', class: '10', roll: 1007, stars: 0, gender: 'male' },
            { id: 68, name: 'Chetan Regar', class: '10', roll: 1008, stars: 0, gender: 'male' },
            { id: 69, name: 'Deepali Prajapat', class: '10', roll: 1009, stars: 0, gender: 'female' },
            { id: 70, name: 'Divya Kanwar Solanki', class: '10', roll: 1010, stars: 0, gender: 'female' },
            { id: 71, name: 'Drishti Kanwar', class: '10', roll: 1011, stars: 0, gender: 'female' },
            { id: 72, name: 'Gautam Singh Dodiya', class: '10', roll: 1012, stars: 0, gender: 'male' },
            { id: 73, name: 'Govind Lal Gurjar', class: '10', roll: 1013, stars: 0, gender: 'male' },
            { id: 74, name: 'Hokam Singh Rajput', class: '10', roll: 1014, stars: 0, gender: 'male' },
            { id: 75, name: 'Jamuna Gurjar', class: '10', roll: 1015, stars: 0, gender: 'female' },
            { id: 76, name: 'Jaswant Gurjar', class: '10', roll: 1016, stars: 0, gender: 'male' },
            { id: 77, name: 'Jinal Kunwar Sisodia', class: '10', roll: 1017, stars: 0, gender: 'female' },
            { id: 78, name: 'Kamlesh Salvi', class: '10', roll: 1018, stars: 0, gender: 'male' },
            { id: 79, name: 'Kanhaiya Lal Gurjar', class: '10', roll: 1019, stars: 0, gender: 'male' },
            { id: 80, name: 'Karan Gurjar', class: '10', roll: 1020, stars: 0, gender: 'male' },
            { id: 81, name: 'Kavita Balai', class: '10', roll: 1021, stars: 0, gender: 'female' },
            { id: 82, name: 'Khushi Gurjar', class: '10', roll: 1022, stars: 0, gender: 'female' },
            { id: 83, name: 'Lokendra Singh', class: '10', roll: 1023, stars: 0, gender: 'male' },
            { id: 84, name: 'Lokendra Singh Rajput', class: '10', roll: 1024, stars: 0, gender: 'male' },
            { id: 85, name: 'Lokesh Gurjar (1025)', class: '10', roll: 1025, stars: 0, gender: 'male' },
            { id: 86, name: 'Lokesh Gurjar (1026)', class: '10', roll: 1026, stars: 0, gender: 'male' },
            { id: 87, name: 'Mahesh Gurjar', class: '10', roll: 1027, stars: 0, gender: 'male' },
            { id: 88, name: 'Mamta Gurjar', class: '10', roll: 1028, stars: 0, gender: 'female' },
            { id: 89, name: 'Manish Gurjar', class: '10', roll: 1029, stars: 0, gender: 'male' },
            { id: 90, name: 'Manisha Gurjar', class: '10', roll: 1030, stars: 0, gender: 'female' },
            { id: 91, name: 'Meera Gurjar', class: '10', roll: 1031, stars: 0, gender: 'female' },
            { id: 92, name: 'Naresh Gurjar', class: '10', roll: 1032, stars: 0, gender: 'male' },
            { id: 93, name: 'Padmnabh Singh Rao', class: '10', roll: 1033, stars: 0, gender: 'male' },
            { id: 94, name: 'Pooja Bunkar', class: '10', roll: 1034, stars: 0, gender: 'female' },
            { id: 95, name: 'Pooja Kumari Gurjar', class: '10', roll: 1035, stars: 0, gender: 'female' },
            { id: 96, name: 'Pushpa Kanwar Rawat', class: '10', roll: 1036, stars: 0, gender: 'female' },
            { id: 97, name: 'Pushpa Salvi', class: '10', roll: 1037, stars: 0, gender: 'female' },
            { id: 98, name: 'Rahul Hiragharpakar', class: '10', roll: 1038, stars: 0, gender: 'male' },
            { id: 99, name: 'Ratan Lal Gurjar', class: '10', roll: 1039, stars: 0, gender: 'male' },
            { id: 100, name: 'Ravina Gurjar', class: '10', roll: 1040, stars: 0, gender: 'female' },
            { id: 101, name: 'Sarswati Balai', class: '10', roll: 1041, stars: 0, gender: 'female' },
            { id: 102, name: 'Seema Salvi', class: '10', roll: 1042, stars: 0, gender: 'female' },
            { id: 103, name: 'Shankar Gurjar', class: '10', roll: 1043, stars: 0, gender: 'male' },
            { id: 104, name: 'Shivraj Prajapat', class: '10', roll: 1044, stars: 0, gender: 'male' },
            { id: 105, name: 'Sugna Sen', class: '10', roll: 1045, stars: 0, gender: 'female' },
            { id: 106, name: 'Tanisha', class: '10', roll: 1046, stars: 0, gender: 'female' },
            { id: 107, name: 'Yuvraj Singh', class: '10', roll: 1047, stars: 0, gender: 'male' }
        ];

        let activeData = JSON.parse(localStorage.getItem('edu_db')) || ALL_STUDENTS;
        let isLocked = true;
        const quotes = [
            "Mistakes are proof that you are trying.",
            "Believe you can and you're halfway there.",
            "The expert in anything was once a beginner.",
            "Success is a journey, not a destination."
        ];

        // --- CORE FUNCTIONS ---
        function start() {
            renderHeader();
            renderLeaders();
            renderStudents();
        }

        function renderHeader() {
            document.getElementById('quote-box').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        }

        function renderLeaders() {
            const sorted = [...activeData].sort((a,b) => b.stars - a.stars);
            document.getElementById('top-overall').innerHTML = sorted.slice(0,5).map(s => `<li>üëë ${s.name} (${s.stars} ‚≠ê)</li>`).join('');
            document.getElementById('top-month').innerHTML = sorted.slice(0,3).map(s => `<li>üèÜ ${s.name}</li>`).join('');
            document.getElementById('top-week').innerHTML = sorted.slice(0,1).map(s => `<li>‚≠ê ${s.name}</li>`).join('');
        }

        function renderStudents() {
            const mList = document.getElementById('male-list');
            const fList = document.getElementById('female-list');
            const search = document.getElementById('student-search').value.toLowerCase();
            const classVal = document.getElementById('class-filter').value;

            mList.innerHTML = ''; fList.innerHTML = '';

            activeData.filter(s => {
                const matchClass = classVal === 'all' || s.class === classVal;
                const matchSearch = s.name.toLowerCase().includes(search) || s.roll.toString().includes(search);
                return matchClass && matchSearch;
            }).forEach(s => {
                const div = document.createElement('div');
                div.className = 'student-row';
                div.innerHTML = `
                    <div style="display:flex; align-items:center;">
                        <strong>${s.name}</strong>
                        <span class="star-badge">${s.stars} ‚≠ê</span>
                    </div>
                    <div style="display:flex; gap:10px;">
                        <button class="btn-round btn-minus" onclick="modStars(${s.id}, -1)" ${isLocked?'disabled':''}>-</button>
                        <button class="btn-round btn-plus" onclick="modStars(${s.id}, 1)" ${isLocked?'disabled':''}>+</button>
                    </div>
                `;
                if(s.gender === 'male') mList.appendChild(div);
                else fList.appendChild(div);
            });
        }

        function modStars(id, val) {
            const student = activeData.find(x => x.id === id);
            student.stars = Math.max(0, student.stars + val);
            localStorage.setItem('edu_db', JSON.stringify(activeData));
            renderStudents();
            renderLeaders();
        }

        function verifyAdmin() {
            const p = prompt("Enter Key:");
            if(p === 'akash') { isLocked = false; renderStudents(); alert("Unlocked!"); }
        }

        // --- NAVIGATION ---
        document.querySelectorAll('#sidebar nav a').forEach(link => {
            link.onclick = (e) => {
                const section = e.target.dataset.section;
                document.querySelectorAll('.app-section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`${section}-section`).classList.remove('hidden');
                document.querySelectorAll('#sidebar nav a').forEach(a => a.classList.remove('active'));
                link.classList.add('active');
                if(section === 'whiteboard') initCanvas();
            }
        });

        // --- CLOUD SYNC ---
        async function pushCloud() {
            const token = document.getElementById('gh-token').value;
            const gist = document.getElementById('gh-gist').value;
            if(!token || !gist) return alert("Fill credentials!");
            try {
                await fetch(`https://api.github.com/gists/${gist}`, {
                    method: 'PATCH',
                    headers: { 'Authorization': `token ${token}` },
                    body: JSON.stringify({ files: { "academia_data.json": { content: JSON.stringify(activeData) } } })
                });
                alert("Cloud Updated!");
            } catch(e) { alert("Error!"); }
        }

        async function pullCloud() {
            const token = document.getElementById('gh-token').value;
            const gist = document.getElementById('gh-gist').value;
            if(!token || !gist) return alert("Fill credentials!");
            try {
                const res = await fetch(`https://api.github.com/gists/${gist}`, { headers: { 'Authorization': `token ${token}` } });
                const d = await res.json();
                activeData = JSON.parse(d.files["academia_data.json"].content);
                localStorage.setItem('edu_db', JSON.stringify(activeData));
                start();
                alert("Local Updated!");
            } catch(e) { alert("Error!"); }
        }

        // --- DRAWING ---
        let ctx, painting = false;
        function initCanvas() {
            const c = document.getElementById('canvas');
            ctx = c.getContext('2d');
            c.width = c.offsetWidth; c.height = 450;
            c.onmousedown = () => painting = true;
            c.onmouseup = () => { painting = false; ctx.beginPath(); };
            c.onmousemove = (e) => {
                if(!painting) return;
                ctx.lineWidth = 4; ctx.lineCap = 'round';
                ctx.strokeStyle = document.getElementById('brush-color').value;
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke(); ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY);
            };
        }
        function clearCanvas() { ctx.clearRect(0,0,2000,2000); }

        document.getElementById('student-search').oninput = renderStudents;
        document.getElementById('class-filter').onchange = renderStudents;

        start();
    </script>
</body>
</html>
